<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tiefelsdorf">
<meta name="dcterms.date" content="2025-09-29">

<title>Chapter 01: Data Visualization – final_exam_quarto</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./icon02.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-bce83624dd429190d13db9bf62533269.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">final_exam_quarto</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./w00_IntroToScriptsAndData.html">GISC6301</a></li><li class="breadcrumb-item"><a href="./w06_DisplayingData.html">Wk06-ch2.Data Visualization Data</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">GISC6301</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w00_IntroToScriptsAndData.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk00-Introduction to Scripts in the RStudio-Environment</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w05_Chapter01_Data_and_Statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk05-ch1.Data &amp; Statistics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w06_DisplayingData.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Wk06-ch2.Data Visualization Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w07_Chapter03_MeanVar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk07-ch3.Measures of Central Tendency and Variation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w08_Chapt04Relationships.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk08-ch4.Bivariate Relationships</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w08_MotivationDataStory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk08-Motivation Data Story</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w09_Chapt04BivariateRegression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk09-ch4.Bivariate Regression Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w10_Chapt13MultipleRegression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk10-ch13.Multiple Regression Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w11_Chapter05A.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk11-ch5A.Probabilities and Random Variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w11_Chapter05B.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk11-ch5B.Probabilities and Random Variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w12_Chapter06Sampling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk12-ch6.Sampling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w13_Chapter07Estimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk13-ch7.Point and Interval Estimation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w14_Chapter08SingleTests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk14-ch8.One-Sample Hypothesis Tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w15_Chapter09TwoSampleMeanTest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk15-ch9.Two-Sample Hypothesis Tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w16_Chapter10NonParStats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk16-ch10.Non-Parametric Statistics and Chi-Square Tests</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">To be continued...</span></span>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#minards-famous-visualization" id="toc-minards-famous-visualization" class="nav-link" data-scroll-target="#minards-famous-visualization"><span class="header-section-number">1.1</span> Minard’s Famous Visualization</a></li>
  <li><a href="#the-role-of-graphics-in-information-processing" id="toc-the-role-of-graphics-in-information-processing" class="nav-link" data-scroll-target="#the-role-of-graphics-in-information-processing"><span class="header-section-number">1.2</span> The Role of Graphics in Information Processing</a>
  <ul class="collapse">
  <li><a href="#john-tukey-quotes" id="toc-john-tukey-quotes" class="nav-link" data-scroll-target="#john-tukey-quotes"><span class="header-section-number">1.2.1</span> John Tukey Quotes</a></li>
  </ul></li>
  <li><a href="#visual-illusions" id="toc-visual-illusions" class="nav-link" data-scroll-target="#visual-illusions"><span class="header-section-number">1.3</span> Visual Illusions</a></li>
  <li><a href="#grammar-of-graphics-and-color" id="toc-grammar-of-graphics-and-color" class="nav-link" data-scroll-target="#grammar-of-graphics-and-color"><span class="header-section-number">1.4</span> Grammar of Graphics and Color</a>
  <ul class="collapse">
  <li><a href="#notes-on-map-variables" id="toc-notes-on-map-variables" class="nav-link" data-scroll-target="#notes-on-map-variables"><span class="header-section-number">1.4.1</span> Notes on Map Variables</a></li>
  <li><a href="#color-blindness" id="toc-color-blindness" class="nav-link" data-scroll-target="#color-blindness"><span class="header-section-number">1.4.2</span> Color Blindness</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#frequency-distribution-and-histogram" id="toc-frequency-distribution-and-histogram" class="nav-link" data-scroll-target="#frequency-distribution-and-histogram"><span class="header-section-number">2</span> Frequency Distribution and Histogram</a>
  <ul class="collapse">
  <li><a href="#what-does-the-distribution-tell-us" id="toc-what-does-the-distribution-tell-us" class="nav-link" data-scroll-target="#what-does-the-distribution-tell-us"><span class="header-section-number">2.1</span> What Does the Distribution Tell Us?</a>
  <ul class="collapse">
  <li><a href="#example-frequency-table" id="toc-example-frequency-table" class="nav-link" data-scroll-target="#example-frequency-table"><span class="header-section-number">2.1.1</span> Example: Frequency Table</a></li>
  </ul></li>
  <li><a href="#construction-guidelines-for-class-intervals" id="toc-construction-guidelines-for-class-intervals" class="nav-link" data-scroll-target="#construction-guidelines-for-class-intervals"><span class="header-section-number">2.2</span> Construction Guidelines for Class Intervals</a>
  <ul class="collapse">
  <li><a href="#additional-guidelines" id="toc-additional-guidelines" class="nav-link" data-scroll-target="#additional-guidelines"><span class="header-section-number">2.2.1</span> Additional Guidelines</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#barpie-charts" id="toc-barpie-charts" class="nav-link" data-scroll-target="#barpie-charts"><span class="header-section-number">3</span> Bar/Pie Charts</a>
  <ul class="collapse">
  <li><a href="#bubble-plots" id="toc-bubble-plots" class="nav-link" data-scroll-target="#bubble-plots"><span class="header-section-number">3.1</span> Bubble Plots</a>
  <ul class="collapse">
  <li><a href="#avoid-3d-charts" id="toc-avoid-3d-charts" class="nav-link" data-scroll-target="#avoid-3d-charts"><span class="header-section-number">3.1.1</span> Avoid 3D Charts</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#side-by-side-histograms" id="toc-side-by-side-histograms" class="nav-link" data-scroll-target="#side-by-side-histograms"><span class="header-section-number">4</span> Side-by-Side Histograms</a></li>
  <li><a href="#the-shape-of-distributions" id="toc-the-shape-of-distributions" class="nav-link" data-scroll-target="#the-shape-of-distributions"><span class="header-section-number">5</span> The Shape of Distributions</a>
  <ul class="collapse">
  <li><a href="#modality" id="toc-modality" class="nav-link" data-scroll-target="#modality"><span class="header-section-number">5.1</span> Modality</a></li>
  </ul></li>
  <li><a href="#quantiles-and-percentiles" id="toc-quantiles-and-percentiles" class="nav-link" data-scroll-target="#quantiles-and-percentiles"><span class="header-section-number">6</span> Quantiles and Percentiles</a>
  <ul class="collapse">
  <li><a href="#example-order-function-in-r" id="toc-example-order-function-in-r" class="nav-link" data-scroll-target="#example-order-function-in-r"><span class="header-section-number">6.1</span> Example: order() Function in R</a></li>
  <li><a href="#percentile-calculation" id="toc-percentile-calculation" class="nav-link" data-scroll-target="#percentile-calculation"><span class="header-section-number">6.2</span> Percentile Calculation</a>
  <ul class="collapse">
  <li><a href="#special-cases-for-alpha" id="toc-special-cases-for-alpha" class="nav-link" data-scroll-target="#special-cases-for-alpha"><span class="header-section-number">6.2.1</span> Special Cases for <span class="math inline">\(\alpha\)</span></a></li>
  <li><a href="#adjustment-coefficient-alpha" id="toc-adjustment-coefficient-alpha" class="nav-link" data-scroll-target="#adjustment-coefficient-alpha"><span class="header-section-number">6.2.2</span> Adjustment Coefficient <span class="math inline">\(\alpha\)</span></a></li>
  </ul></li>
  <li><a href="#quantiles" id="toc-quantiles" class="nav-link" data-scroll-target="#quantiles"><span class="header-section-number">6.3</span> Quantiles</a></li>
  <li><a href="#important-quantiles" id="toc-important-quantiles" class="nav-link" data-scroll-target="#important-quantiles"><span class="header-section-number">6.4</span> Important Quantiles</a></li>
  </ul></li>
  <li><a href="#box-plots" id="toc-box-plots" class="nav-link" data-scroll-target="#box-plots"><span class="header-section-number">7</span> Box-Plots</a>
  <ul class="collapse">
  <li><a href="#construction-of-the-box-plot" id="toc-construction-of-the-box-plot" class="nav-link" data-scroll-target="#construction-of-the-box-plot"><span class="header-section-number">7.1</span> Construction of the Box-Plot</a></li>
  <li><a href="#comparison-of-the-histogram-with-the-box-plot" id="toc-comparison-of-the-histogram-with-the-box-plot" class="nav-link" data-scroll-target="#comparison-of-the-histogram-with-the-box-plot"><span class="header-section-number">7.2</span> Comparison of the Histogram with the Box-Plot</a></li>
  <li><a href="#use-of-box-plots" id="toc-use-of-box-plots" class="nav-link" data-scroll-target="#use-of-box-plots"><span class="header-section-number">7.3</span> Use of Box-Plots</a></li>
  </ul></li>
  <li><a href="#design-guidelines" id="toc-design-guidelines" class="nav-link" data-scroll-target="#design-guidelines"><span class="header-section-number">8</span> Design Guidelines</a></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading"><span class="header-section-number">9</span> Further Reading</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./w00_IntroToScriptsAndData.html">GISC6301</a></li><li class="breadcrumb-item"><a href="./w06_DisplayingData.html">Wk06-ch2.Data Visualization Data</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Chapter 01: Data Visualization</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Tiefelsdorf </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 29, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<ul>
<li>Our brain is more accustomed to processing visual stimuli and to recognizing patterns in graphs than to finding patterns in tables with columns of numbers.</li>
</ul>
<p><strong>Experiment:</strong> Try to describe the data either using the table or the graph. Which takes more effort?</p>
<p>The graphs organize <strong>data points</strong> in <strong>logical order</strong> onto a common scale and converts their numbers into <strong>information</strong>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/page1_img1.png" class="img-fluid figure-img"></p>
<figcaption>2007 Sales Revenue - Table and Graph Comparison</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/page1_img2.jpeg" class="img-fluid figure-img"></p>
<figcaption>2007 Sales Revenue - Table and Graph Comparison</figcaption>
</figure>
</div>
<blockquote class="blockquote">
<p><strong>Note:</strong> Common scale for both variables helps comparison.</p>
</blockquote>
<hr>
<section id="minards-famous-visualization" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="minards-famous-visualization"><span class="header-section-number">1.1</span> Minard’s Famous Visualization</h2>
<p>Minard’s depiction of the demise of Napoleon’s Grand Army in the Russian campaign June 23, 1812 to December 1812. An army of 422,000 left but only 10,000 returned.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/page2_img1.jpeg" class="img-fluid figure-img"></p>
<figcaption>Minard’s Map of Napoleon’s Russian Campaign</figcaption>
</figure>
</div>
<p>See also the R script <code>MinardTroops.R</code> (generates separate plot-window). Note that the package <code>HistData</code> comprises of several historically interesting data sets.</p>
<hr>
</section>
<section id="the-role-of-graphics-in-information-processing" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="the-role-of-graphics-in-information-processing"><span class="header-section-number">1.2</span> The Role of Graphics in Information Processing</h2>
<blockquote class="blockquote">
<p><em>Modern data graphics can do much more than simply substitute for small statistical tables. At their best, graphics are instruments for reasoning about quantitative information. Often the most effective way to describe, explore, and summarize a set of numbers – even a very large set – is to look at pictures of those numbers. Furthermore, of all methods for analyzing and communicating statistical information, well-designed data graphics are usually the simplest and at the same time the most powerful.</em></p>
<p>From the Introduction to Edward R. Tufte, <strong>1983</strong>. <em>The Visual Display of Quantitative Information</em>. Graphics Press</p>
</blockquote>
<section id="john-tukey-quotes" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="john-tukey-quotes"><span class="header-section-number">1.2.1</span> John Tukey Quotes</h3>
<ul>
<li><em>It is better to have a fuzzy answer to right questions than a precise answer to the wrong question.</em></li>
<li><em>The nice thing about being a statistician is that I can play in everybody’s backyard.</em></li>
</ul>
<p><strong>Note:</strong> The progressing focus of GISciences from <em>spatial data handling</em> to <em>geo-spatial data analytics</em>.</p>
<p><strong>Caution:</strong> Sometimes our visual perception of patterns may be tricked by illusions happening in our brains: Face or vase?</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/page3_img1.jpeg" class="img-fluid figure-img" style="width:30.0%"></p>
<figcaption>Face or Vase Optical Illusion</figcaption>
</figure>
</div>
<hr>
</section>
</section>
<section id="visual-illusions" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="visual-illusions"><span class="header-section-number">1.3</span> Visual Illusions</h2>
<p>Static circles appear to rotate:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/page4_img1.jpeg" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption>Rotating Circles Optical Illusion</figcaption>
</figure>
</div>
<p>Modern computer software supports the <strong>visual exploration of data</strong> and finding the most communicative way of presenting the <strong>information hidden</strong> within our data to gain meaningful knowledge about the underlying process that has generated our data.</p>
<hr>
</section>
<section id="grammar-of-graphics-and-color" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="grammar-of-graphics-and-color"><span class="header-section-number">1.4</span> Grammar of Graphics and Color</h2>
<ul>
<li><p>The science of semiology (study of how signs and symbols are cognitively processed) has developed a <strong>grammar of graphics</strong><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. These rules have been implemented in R’s library <code>ggplot2</code> for generating statistical graphs.</p></li>
<li><p>Color can be a powerful graphical tool (see <a href="http://colorbrewer2.org/">http://colorbrewer2.org/</a>) if your output medium permits its use.</p></li>
</ul>
<p>For <strong>choropleth map</strong> (coloring a set of regions) one distinguishes between:</p>
<ul>
<li>[a] <strong>categorical</strong> map themes</li>
<li>[b] <strong>gradient</strong> continuous map themes</li>
<li>[c] <strong>bi-polar</strong> or <strong>diverging</strong> map themes with a natural break point</li>
</ul>
<p><img src="images/w06_DisplayingData/page5_img2.png" class="img-fluid" style="width:30.0%" alt="Categorical, Gradient, and Diverging Map Themes"> <img src="images/w06_DisplayingData/page5_img3.png" class="img-fluid" style="width:30.0%" alt="Gradient Map"> <img src="images/w06_DisplayingData/page5_img4.png" class="img-fluid" style="width:30.0%" alt="Diverging Map"></p>
<section id="notes-on-map-variables" class="level3" data-number="1.4.1">
<h3 data-number="1.4.1" class="anchored" data-anchor-id="notes-on-map-variables"><span class="header-section-number">1.4.1</span> Notes on Map Variables</h3>
<ul>
<li><p><strong>Fertility rate</strong> refers to the number of children born per woman. Approximately, for industrialized countries, 2.1 children per woman are needed to maintain a stable nationally population count.</p></li>
<li><p>The variable <span class="math inline">\(\log \left(\frac{TotalInFlow}{TotalOutFlow}\right)\)</span> measures whether a province is gaining or losing population due to internal migration within the 95 provinces of Italy:</p></li>
</ul>
<p><span class="math display">\[\log \left(\frac{TotalInFlow}{TotalOutFlow}\right) = \begin{cases} &lt; 0 &amp; \text{population loss} \\ \approx 0 &amp; \text{stable population} \\ &gt; 0 &amp; \text{population gain} \end{cases}\]</span></p>
<ul>
<li>See the R script <code>MapTX.R</code> for example maps of the TX counties.</li>
</ul>
</section>
<section id="color-blindness" class="level3" data-number="1.4.2">
<h3 data-number="1.4.2" class="anchored" data-anchor-id="color-blindness"><span class="header-section-number">1.4.2</span> Color Blindness</h3>
<p><strong>Note:</strong> Approximately 12% of the population – males predominantly – are colorblind (mainly unable to distinguish between red and green).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/page6_img2.jpeg" class="img-fluid figure-img"></p>
<figcaption>Ishihara Test for Color Blindness</figcaption>
</figure>
</div>
<ul>
<li>Normal Color Vision: 25, 29, 45, 56, 6, 8</li>
<li>Red-Green Color Blind: 25, spots, spots, 56, spots, spots</li>
</ul>
<hr>
</section>
</section>
</section>
<section id="frequency-distribution-and-histogram" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Frequency Distribution and Histogram</h1>
<ul>
<li>Histograms are used to summarize the distribution of metrically scaled variables. They display how frequently the observations in a data set will be within a particular range of values.</li>
</ul>
<section id="what-does-the-distribution-tell-us" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="what-does-the-distribution-tell-us"><span class="header-section-number">2.1</span> What Does the Distribution Tell Us?</h2>
<ul>
<li><p>Reasonable value range.</p></li>
<li><p>It gives an indication of the most frequent values.</p></li>
<li><p>It gives an indication of the degree of spread and central location(s) of the distribution.</p></li>
<li><p>It points to unusual observations with respect to the remaining sample observation.</p></li>
<li><p>Since histograms are based on the aggregation of observations within given intervals, information will be lost. Original data values within an interval are substituted by the interval midpoint.</p></li>
<li><p>A <strong>frequency table</strong> is a numerical list which underlies a histogram.</p></li>
</ul>
<section id="example-frequency-table" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="example-frequency-table"><span class="header-section-number">2.1.1</span> Example: Frequency Table</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">freqTable</span>(reactFreq)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>   startPoint endPoint midPoint freq</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>        <span class="fl">0.50</span>     <span class="fl">0.75</span>    <span class="fl">0.625</span>    <span class="dv">7</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>        <span class="fl">0.75</span>     <span class="fl">1.00</span>    <span class="fl">0.875</span>   <span class="dv">57</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>        <span class="fl">1.00</span>     <span class="fl">1.25</span>    <span class="fl">1.125</span>  <span class="dv">132</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>        <span class="fl">1.25</span>     <span class="fl">1.50</span>    <span class="fl">1.375</span>   <span class="dv">92</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>        <span class="fl">1.50</span>     <span class="fl">1.75</span>    <span class="fl">1.625</span>  <span class="dv">125</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>        <span class="fl">1.75</span>     <span class="fl">2.00</span>    <span class="fl">1.875</span>   <span class="dv">61</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>        <span class="fl">2.00</span>     <span class="fl">2.25</span>    <span class="fl">2.125</span>   <span class="dv">50</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>        <span class="fl">2.25</span>     <span class="fl">2.50</span>    <span class="fl">2.375</span>   <span class="dv">17</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>        <span class="fl">2.50</span>     <span class="fl">2.75</span>    <span class="fl">2.625</span>   <span class="dv">25</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>       <span class="fl">2.75</span>     <span class="fl">3.00</span>    <span class="fl">2.875</span>   <span class="dv">11</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span>       <span class="fl">3.00</span>     <span class="fl">3.25</span>    <span class="fl">3.125</span>    <span class="dv">5</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>       <span class="fl">3.25</span>     <span class="fl">3.50</span>    <span class="fl">3.375</span>    <span class="dv">8</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span>       <span class="fl">3.50</span>     <span class="fl">3.75</span>    <span class="fl">3.625</span>    <span class="dv">1</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span>       <span class="fl">3.75</span>     <span class="fl">4.00</span>    <span class="fl">3.875</span>    <span class="dv">4</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span>       <span class="fl">4.00</span>     <span class="fl">4.25</span>    <span class="fl">4.125</span>    <span class="dv">3</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="dv">16</span>       <span class="fl">4.25</span>     <span class="fl">4.50</span>    <span class="fl">4.375</span>    <span class="dv">2</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="dv">17</span>       <span class="fl">4.50</span>     <span class="fl">4.75</span>    <span class="fl">4.625</span>    <span class="dv">0</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="dv">18</span>       <span class="fl">4.75</span>     <span class="fl">5.00</span>    <span class="fl">4.875</span>    <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Reaction Time Density (in seconds)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/螢幕擷取畫面 2025-12-15 001812.png" class="img-fluid figure-img"></p>
<figcaption>Reaction Time Density (in seconds)</figcaption>
</figure>
</div>
<p><strong>Note:</strong> The histogram does not show the absolute frequencies but their proportional densities:</p>
<p><span class="math display">\[density_i = \frac{frequency_i}{\sum_{j=1}^{number\ of\ classes} frequency_j}\]</span></p>
<hr>
</section>
</section>
<section id="construction-guidelines-for-class-intervals" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="construction-guidelines-for-class-intervals"><span class="header-section-number">2.2</span> Construction Guidelines for Class Intervals</h2>
<ul>
<li><p>The intervals cover the <strong>whole support</strong> of the data, they do not overlap, and they do not exhibit gaps.</p></li>
<li><p>The intervals are on the x-axis and the frequencies (either counts or relative frequencies) are on the y-axis.</p></li>
<li><p>Select the appropriate number of interval classes.</p></li>
<li><p>Selection of inappropriate number of classes:</p>
<ul>
<li>If the number of classes is <strong>too small</strong> it can mask critical characteristics of an underlying distribution.</li>
<li>If the number of classes is <strong>too large</strong> typical data clusters become diluted.</li>
</ul></li>
<li><p>Respect <strong>natural breaks</strong>, such as <em>zero</em> degrees Celsius or a <em>ph</em>-level of 7.</p></li>
<li><p>In general, the interval width needs to be <strong>constant</strong>. This allows proper comparison of the frequencies among classes.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/page9_img1.jpeg" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Effect of Number of Classes on Histogram</figcaption>
</figure>
</div>
<section id="additional-guidelines" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="additional-guidelines"><span class="header-section-number">2.2.1</span> Additional Guidelines</h3>
<ul>
<li>Don’t make the error shown below (fortunately the histogram functions protect us from doing these mistakes):</li>
</ul>
<p><img src="images/w06_DisplayingData/page10_img1.png" class="img-fluid" style="width:45.0%" alt="Histogram Errors to Avoid"> <img src="images/w06_DisplayingData/page10_img2.png" class="img-fluid" style="width:45.0%" alt="Histogram with Unequal Intervals"></p>
<ul>
<li><p>In general, use the smallest and largest of the observation as lower and upper bound.</p></li>
<li><p>If there are a few far outlying observations it is advisable to plot first all data simultaneously and then <strong>zoom in a second graph</strong> into the bulk of the observations to gain a better <strong>visual resolution</strong>.</p></li>
<li><p>If more than one histogram of the same data (e.g., city A and city B) is plotted side-by-side use a <strong>common</strong> classification scale.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/page10_img3.png" class="img-fluid figure-img"></p>
<figcaption>Zooming into Histogram</figcaption>
</figure>
</div>
<hr>
</section>
</section>
</section>
<section id="barpie-charts" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Bar/Pie Charts</h1>
<ul>
<li>Bar charts plot the frequency or other summary statistics (y-axis) against the representation of <strong>categorical variables</strong> (x-axis).</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/page11_img1.jpeg" class="img-fluid figure-img" style="width:40.0%"></p>
<figcaption>Bar Chart Example</figcaption>
</figure>
</div>
<ul>
<li><p><strong>Warning:</strong> Make sure to properly scale the y-axis to highlight differences in the counts or summary statistic.</p></li>
<li><p>Since the order of categories is irrelevant it is good practice to first display the <strong>most frequent</strong> category first, then the next frequent category and so forth.</p></li>
<li><p>I am <strong>not a big fan</strong> of <strong>pie charts</strong>. They do not communicate the information in a professional manner. However, sometimes for efficient comparison purposes, they are quite useful. In particular, since their size can also be varied in a meaningful way.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/page12_img1.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Pie Charts on Map</figcaption>
</figure>
</div>
<section id="bubble-plots" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="bubble-plots"><span class="header-section-number">3.1</span> Bubble Plots</h2>
<p>For bubble plots the circle area <span class="math inline">\(area = \pi \cdot radius^2\)</span>, for instance, the population count, needs to be proportional to radius. Thus:</p>
<p><span class="math display">\[radius = \sqrt{\frac{area}{\pi}}\]</span></p>
<p>See the R-script <code>BUBBLEPLOT.R</code> from the website <a href="http://www.flowingdata.com">http://www.flowingdata.com</a> (visit the webpage for inspirations).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/螢幕擷取畫面 2025-12-15 002443.png" class="img-fluid figure-img"></p>
<figcaption>Comparison of Crime and Burglar Rates per 100,000 Inhabitants in 2005</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/page12_img3.jpeg" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Bubble Plot Example - Crime and Burglar Rates</figcaption>
</figure>
</div>
<section id="avoid-3d-charts" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="avoid-3d-charts"><span class="header-section-number">3.1.1</span> Avoid 3D Charts</h3>
<p>If information can be displayed 2-dimensional, do so.</p>
<p>Three-dimensional charts frequently distract from the underlying information in a graph:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/page12_img4.jpeg" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption>3D Chart Examples to Avoid</figcaption>
</figure>
</div>
<hr>
</section>
</section>
</section>
<section id="side-by-side-histograms" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Side-by-Side Histograms</h1>
<ul>
<li>Side-by-side graphs break observations apart by a categorical variable. They are histograms rotated by 90 degrees.</li>
</ul>
<p><strong>Example:</strong> Selected Texas counties’ population pyramids</p>
<p><img src="images/w06_DisplayingData/page13_img1.png" class="img-fluid" style="width:30.0%" alt="Population Pyramids - Empty Nesters, Balanced, Retirees"> <img src="images/w06_DisplayingData/page13_img2.png" class="img-fluid" style="width:30.0%" alt="Dallas County Population Pyramid"> <img src="images/w06_DisplayingData/page13_img3.png" class="img-fluid" style="width:30.0%" alt="Llano County Population Pyramid"></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>County Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Collin County</td>
<td>empty nesters</td>
</tr>
<tr class="even">
<td>Dallas County</td>
<td>balanced</td>
</tr>
<tr class="odd">
<td>Llano County</td>
<td>retirees</td>
</tr>
</tbody>
</table>
<p><img src="images/w06_DisplayingData/page13_img4.png" class="img-fluid" style="width:30.0%" alt="TX-Mexico Border Hispanics"> <img src="images/w06_DisplayingData/page13_img5.jpeg" class="img-fluid" style="width:30.0%" alt="Male Detention Center"> <img src="images/w06_DisplayingData/page13_img6.jpeg" class="img-fluid" style="width:30.0%" alt="Texas A&amp;M University"></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>County Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Starr County</td>
<td>TX-Mexico border Hispanics</td>
</tr>
<tr class="even">
<td>Concho County</td>
<td>male detention center</td>
</tr>
<tr class="odd">
<td>Brazos County</td>
<td>Texas A&amp;M University</td>
</tr>
</tbody>
</table>
<blockquote class="blockquote">
<p><strong>Note:</strong> <strong>common scale</strong> is used for males and females and <strong>relative frequencies</strong> are used.</p>
</blockquote>
<hr>
</section>
<section id="the-shape-of-distributions" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> The Shape of Distributions</h1>
<p>Distributions can be distinguished with regards the <strong>balance</strong> of their left and right tails:</p>
<ul>
<li><p><strong>Symmetric</strong> distributions. Tails are balanced into either direction from a central value.</p></li>
<li><p><strong>Negatively</strong> skewed distributions (long tail into the direction of small values)</p></li>
<li><p><strong>Positively</strong> skewed distributions (long tail into the direction of large values). These distributions frequently emerge for variables with a binding lower origin (like zero income).</p></li>
<li><p><strong>Skewness</strong> refers to a longer tail in one direction and a concentrated distribution in the other direction.</p></li>
<li><p>Extreme skewness may hint at <strong>outliers</strong> that do not match the rest of the observed data. <span class="math inline">\(\Rightarrow\)</span> A different data generating process may have generated different observations.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/page14_img1.png" class="img-fluid figure-img"></p>
<figcaption>Shapes of Frequency Distributions</figcaption>
</figure>
</div>
<p><em>Figure 3.9: Shapes of frequency distributions: (a) Normal; (b) Bimodal; (c) Negatively skewed; (d) Positively skewed</em></p>
<section id="modality" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="modality"><span class="header-section-number">5.1</span> Modality</h2>
<p>The number of meaningful clusters of observations is described by the term <strong>modality</strong>:</p>
<ul>
<li><strong>Uni-modality</strong> refers to just one peak</li>
<li><strong>Bi-modality</strong> refers to two outstanding peaks. It may hint at a heterogeneous population.</li>
<li><strong>Multimodality</strong> refers to more than two outstanding peaks.</li>
</ul>
<hr>
</section>
</section>
<section id="quantiles-and-percentiles" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Quantiles and Percentiles</h1>
<ul>
<li>Technically, quantiles and percentiles are generated from a <strong>sorted list</strong> of the original data points:</li>
</ul>
<p><span class="math display">\[x_{[1]} \leq x_{[2]} \leq x_{[3]} \leq \cdots \leq x_{[n-1]} \leq x_{[n]}\]</span></p>
<p>where each observation has an assigned rank <span class="math inline">\(i \in \{1, 2, \ldots, n\}\)</span>, with <span class="math inline">\(i = 1\)</span> for the smallest observation and <span class="math inline">\(i = n\)</span> for the largest observation.</p>
<section id="example-order-function-in-r" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="example-order-function-in-r"><span class="header-section-number">6.1</span> Example: order() Function in R</h2>
<p>See R-script <code>QuantileDemo.r</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> (<span class="fu">data.frame</span>(x, idx, x[idx]))</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    x idx x.idx.</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="fl">4.0</span>   <span class="dv">4</span>    <span class="fl">2.5</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="fl">4.4</span>   <span class="dv">5</span>    <span class="fl">3.1</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="fl">3.8</span>   <span class="dv">3</span>    <span class="fl">3.8</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="fl">2.5</span>   <span class="dv">9</span>    <span class="fl">3.9</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="fl">3.1</span>   <span class="dv">1</span>    <span class="fl">4.0</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>  <span class="fl">4.3</span>  <span class="dv">12</span>    <span class="fl">4.1</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  <span class="fl">5.1</span>   <span class="dv">6</span>    <span class="fl">4.3</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>  <span class="fl">4.6</span>   <span class="dv">2</span>    <span class="fl">4.4</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>  <span class="fl">3.9</span>  <span class="dv">11</span>    <span class="fl">4.4</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="fl">4.8</span>   <span class="dv">8</span>    <span class="fl">4.6</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> <span class="fl">4.4</span>  <span class="dv">10</span>    <span class="fl">4.8</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span> <span class="fl">4.1</span>   <span class="dv">7</span>    <span class="fl">5.1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="images/w06_DisplayingData/螢幕擷取畫面 2025-12-15 002305.png" class="img-fluid"></p>
</section>
<section id="percentile-calculation" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="percentile-calculation"><span class="header-section-number">6.2</span> Percentile Calculation</h2>
<p>For a given data value <span class="math inline">\(x_{[i]}\)</span> the <strong>percentile</strong> measures the proportion of sample observations less or equal to <span class="math inline">\(x_{[i]}\)</span>. The rank <span class="math inline">\(i\)</span> and the number of observations <span class="math inline">\(n\)</span> are used for their calculation.</p>
<p>In its general form a percentile is calculated as:</p>
<p><span class="math display">\[p(x_{[i]}) = \frac{i - \alpha}{n + (1 - \alpha) - \alpha}\]</span></p>
<p>where <span class="math inline">\(x_{[i]}\)</span> is the <span class="math inline">\(i\)</span>-th sorted data value with <span class="math inline">\(0 \leq \alpha \leq 1\)</span>.</p>
<section id="special-cases-for-alpha" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="special-cases-for-alpha"><span class="header-section-number">6.2.1</span> Special Cases for <span class="math inline">\(\alpha\)</span></h3>
<ul>
<li><p>A value of <span class="math inline">\(\alpha = 0.0\)</span> gives <span class="math inline">\(p(x_{[i]}) = \frac{i}{n+1}\)</span> with <span class="math inline">\(p \in \left[\frac{1}{n+1}, \frac{n}{n+1}\right]\)</span>.</p></li>
<li><p>A value of <span class="math inline">\(\alpha = 0.5\)</span> gives <span class="math inline">\(p(x_{[i]}) = \frac{i - 0.5}{n}\)</span> with <span class="math inline">\(p \in \left[\frac{0.5}{n}, \frac{n-0.5}{n}\right]\)</span>.</p></li>
<li><p>A value of <span class="math inline">\(\alpha = 1.0\)</span> gives <span class="math inline">\(p(x_{[i]}) = \frac{i - 1}{n - 1}\)</span> with <span class="math inline">\(p \in [0, 1]\)</span>.</p></li>
</ul>
</section>
<section id="adjustment-coefficient-alpha" class="level3" data-number="6.2.2">
<h3 data-number="6.2.2" class="anchored" data-anchor-id="adjustment-coefficient-alpha"><span class="header-section-number">6.2.2</span> Adjustment Coefficient <span class="math inline">\(\alpha\)</span></h3>
<p>This adjustment coefficient <span class="math inline">\(\alpha\)</span> links the percentile back to an underlying hypothetical distribution:</p>
<p><strong>Justification for <span class="math inline">\(\alpha &lt; 1\)</span>:</strong> if additional sample observations become available, then it would be possible to observe data values that are smaller or larger than the most extreme observations <span class="math inline">\(x_{[1]}\)</span> and <span class="math inline">\(x_{[n]}\)</span> in the current sample.</p>
<ul>
<li>The R function <code>ppoints(n, a)</code> calculates the percentiles. Try the function for <span class="math inline">\(\alpha \in \{0, 0.5, 1\}\)</span> to understand its behavior.</li>
</ul>
</section>
</section>
<section id="quantiles" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="quantiles"><span class="header-section-number">6.3</span> Quantiles</h2>
<p>A <strong>quantile</strong> is that data value <span class="math inline">\(x_{[i]}\)</span> of a distribution, which is associated with a particular percentile point.</p>
<ul>
<li><p>For instance, if <span class="math inline">\(\alpha = 1\)</span> has been selected for the percentiles, then <span class="math inline">\(x_{[i]} = q(p(x_{[i]}))\)</span>.</p></li>
<li><p>For any other percentile not obtained in the dataset (a gap value), the quantile is linearly interpolated by:</p></li>
</ul>
<p><span class="math display">\[q(p) = \gamma \cdot x_{[i]} + (1 - \gamma) \cdot x_{[i+1]}\]</span></p>
<p>with <span class="math inline">\(p(x_{[i]}) \leq p \leq p(x_{[i+1]})\)</span> and <span class="math inline">\(0 \leq \gamma \leq 1\)</span>.</p>
<ul>
<li>Specific distributions (normal, uniform, skewed) have characteristic quantile plots.</li>
</ul>
</section>
<section id="important-quantiles" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="important-quantiles"><span class="header-section-number">6.4</span> Important Quantiles</h2>
<ul>
<li><p><strong>0.25 quantile</strong> also called <span class="math inline">\(Q_1\)</span> quartile (25 percent of the observations are smaller or equal to this quantile value)</p></li>
<li><p><strong>0.50 quantile</strong> also called the <strong>median</strong> (50 percent of the observations are smaller or larger than the given quantile value)</p></li>
<li><p><strong>0.75 quantile</strong> also called <span class="math inline">\(Q_3\)</span> quartile (75 percent of the observations are smaller or equal to this quantile value and 25 percent of the observations are larger than this value)</p></li>
<li><p>A measure of spread is the <strong>inter-quartile range</strong>: <span class="math inline">\(IQR = Q_3 - Q_1\)</span></p></li>
</ul>
<hr>
</section>
</section>
<section id="box-plots" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Box-Plots</h1>
<section id="construction-of-the-box-plot" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="construction-of-the-box-plot"><span class="header-section-number">7.1</span> Construction of the Box-Plot</h2>
<ol type="1">
<li><p>Draw a box from <span class="math inline">\(Q_1\)</span> to <span class="math inline">\(Q_3\)</span>. Mark the median <span class="math inline">\(Q_2\)</span> in the center of the box with a line.</p></li>
<li><p><strong>Definition of adjacent values:</strong></p></li>
</ol>
<p><span class="math display">\[x_{low}^{adj} = \min\left(x_{[i]} \in (Q_1, Q_1 - 1.5 \cdot IQR) \text{ and } x_{[i]} \text{ in dataset}\right)\]</span></p>
<p>and</p>
<p><span class="math display">\[x_{high}^{adj} = \max\left(x_{[i]} \in (Q_3, Q_3 + 1.5 \cdot IQR) \text{ and } x_{[i]} \text{ in dataset}\right)\]</span></p>
<p>The term <span class="math inline">\(x \in (a, b)\)</span> means all <span class="math inline">\(x\)</span>-values in the interval between <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span>.</p>
<ol start="3" type="1">
<li><p>Draw the “fences” so they just include the smallest and largest data values <span class="math inline">\(x_{low}^{adj}\)</span> and <span class="math inline">\(x_{high}^{adj}\)</span>, respectively.</p></li>
<li><p><strong>Outliers</strong> are in the interval <span class="math inline">\([1.5 \cdot IQR, 3.0 \cdot IQR]\)</span> starting from <span class="math inline">\(Q_1\)</span> below or <span class="math inline">\(Q_3\)</span> above, respectively.</p></li>
<li><p><strong>Severe outliers</strong> are beyond that range <span class="math inline">\((&gt; 3.0 \cdot IQR)\)</span></p></li>
</ol>
</section>
<section id="comparison-of-the-histogram-with-the-box-plot" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="comparison-of-the-histogram-with-the-box-plot"><span class="header-section-number">7.2</span> Comparison of the Histogram with the Box-Plot</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/page18_img1.jpeg" class="img-fluid figure-img"></p>
<figcaption>Box Plot Compared to Histogram and Density Curve</figcaption>
</figure>
</div>
<p><em>Figure 6-16. Box plot compared to histogram and density curve</em></p>
<ul>
<li>The box-plot is <strong>not able to show multimodal distributions</strong>.</li>
<li>The box-plot highlights the tails of a distribution better (in particular for skewed distributions and distributions with outliers).</li>
</ul>
</section>
<section id="use-of-box-plots" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="use-of-box-plots"><span class="header-section-number">7.3</span> Use of Box-Plots</h2>
<ul>
<li>Easy visual description of the distribution of a variable and potential outliers</li>
<li>Comparison of distributions for several variables side-by-side.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/w06_DisplayingData/page19_img1.png" class="img-fluid figure-img"></p>
<figcaption>Water Consumption Box Plots by Year</figcaption>
</figure>
</div>
<p>See the R-script <code>Boxplots.r</code></p>
<hr>
</section>
</section>
<section id="design-guidelines" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Design Guidelines</h1>
<ul>
<li><p>Be clear what information goes on the x-axis (abscissa) and what on the y-axis (ordinate).</p></li>
<li><p>Be clear that histograms, stem-and-leaf and trend graphs are for metric variables and bar charts are for categorical variables.</p></li>
<li><p>Make sure that your graphs communicate its intended message utilitarian, neat and orderly (this usually translates into a minimal amount of applied ink).</p></li>
<li><p>Supply a title for each graph and a longer caption underneath it.</p></li>
<li><p>Always label the axis properly.</p></li>
<li><p>Don’t add nonessential material.</p></li>
<li><p>Avoid 3D, pie charts and other “eye candy” (search Google for “bad graphs” for a good laugh)</p></li>
</ul>
<hr>
</section>
<section id="further-reading" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Further Reading</h1>
<ul>
<li>Kabacoff. Chapter 4: Getting started with graphs.</li>
<li>Kabacoff. Chapter 6: Basic graphs</li>
<li>Kabacoff. Chapter 11: Intermediate graphs</li>
<li>Kabacoff. Chapter 19: Advanced graphs</li>
<li>Kabacoff’s book <em>Modern Data Visualization with R</em> on github</li>
<li>Wickham &amp; Grolemund: <a href="https://r4ds.had.co.nz/data-visualisation.html">https://r4ds.had.co.nz/data-visualisation.html</a></li>
<li>Wickham &amp; Grolemund: <a href="https://r4ds.had.co.nz/graphics-for-communication.html">https://r4ds.had.co.nz/graphics-for-communication.html</a></li>
<li>Chang: <em>R Graphics Cookbook</em>. 2nd edition</li>
<li><a href="http://www.flowingdata.com">http://www.flowingdata.com</a></li>
</ul>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>See Leland Wilkinson, <strong>2005</strong>. <em>The Grammar of Graphics</em>. 2nd edition, Springer Verlag.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>